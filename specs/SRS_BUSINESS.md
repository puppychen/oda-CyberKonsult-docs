# 商業需求規格書

> **ODA Cyber Konsult - 資安助手 RAG 系統**
>
> 文件版本：1.7.0
> 最後更新：2026-02-17
> 文件類型：商業需求規格書（面向產品經理、系統架構師、業務決策者）

---

## 目錄

1. [執行摘要](#1-執行摘要)
2. [專案願景與目標](#2-專案願景與目標)
3. [使用者角色](#3-使用者角色)
4. [功能概述](#4-功能概述)
5. [使用情境](#5-使用情境)
6. [系統架構概覽](#6-系統架構概覽)
7. [非功能需求概覽](#7-非功能需求概覽)
8. [發展藍圖](#8-發展藍圖)
9. [風險與假設](#9-風險與假設)
10. [附錄](#10-附錄)

---

## 1. 執行摘要

### 1.1 專案背景

隨著資安法規日趨嚴格，企業在處理內部文件與客戶資料時，面臨以下挑戰：

- 法規諮詢耗時且依賴專業人員
- 文件中的敏感個資難以全面偵測與處理
- 缺乏一致性的資料去識別化標準流程
- 稽核追蹤與合規證明成本高昂

**ODA Cyber Konsult** 以中小企業為主要服務對象，透過三層式 AI 顧問模式（新手/一般/顧問），搭配在地化資安法規知識庫，讓不同技術背景的使用者都能獲得適切的資安諮詢服務。

### 1.2 核心價值主張

| 價值主張 | 說明 |
|----------|------|
| **即時資安諮詢** | 透過 AI 驅動的智慧問答，員工可即時獲得資安法規與政策解答 |
| **自動敏感資料保護** | 自動偵測與去識別化文件中的個人可識別資訊 (PII)，用於準備 RAG 知識庫訓練資料 |
| **合規證明與稽核** | 完整的操作記錄與報告，滿足法規稽核需求 |
| **降低人力成本** | 減少人工審查文件的時間與錯誤率 |
| **三層式AI顧問模式** | 依使用者技術背景提供新手、一般、顧問三種回應深度，降低資安諮詢門檻 |
| **在地化法規知識庫** | 內建台灣資通安全管理法、個資法及 ISO 27001/27701 等法規標準知識 |

### 1.3 目標市場與使用者

**主要市場**：
- 中小企業（資安合規需求）
- 系統整合商 (SI) / IT 通路商（為客戶部署資安顧問服務）
- 資安顧問公司（提升顧問效率）

**次要市場**：
- 金融業合規團隊
- 醫療機構個資管理單位
- 政府機關資安部門

**目標使用者**：
- 企業員工（一般資安諮詢 → 新手模式）
- IT/MIS 工程師（技術性資安問題 → 一般模式）
- 資安 ISO 顧問（深入專業諮詢 → 顧問模式）
- IT 系統管理員（系統維護與設定）

---

## 2. 專案願景與目標

### 2.1 長期願景

建立一個 **企業級智慧型資安助手平台**，提供：

```
┌──────────────────────────────────────────────────────────────┐
│                    ODA Cyber Konsult 願景                     │
├──────────────────────────────────────────────────────────────┤
│                                                               │
│    ┌─────────────────┐    ┌─────────────────┐                │
│    │   智慧問答系統   │    │   資料保護平台   │                │
│    │                 │    │                 │                │
│    │  • AI 驅動查詢   │    │  • PII 偵測     │                │
│    │  • 知識庫管理    │⟷   │  • 智慧去識別化  │                │
│    │  • 引用追蹤      │    │  • 批次處理     │                │
│    └─────────────────┘    └─────────────────┘                │
│                    │                    │                     │
│                    └────────┬───────────┘                     │
│                             │                                 │
│                    ┌────────▼────────┐                        │
│                    │   合規支援中心   │                        │
│                    │                 │                        │
│                    │  • 稽核日誌     │                        │
│                    │  • 合規報告     │                        │
│                    │  • 多會員隔離   │                        │
│                    └─────────────────┘                        │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

### 2.2 業務目標與關鍵績效指標 (KPI)

| 階段 | 業務目標 | KPI |
|------|----------|-----|
| **Phase 1** | 核心功能交付 | RAG 查詢可用率 ≥ 95%、PII 偵測準確率 ≥ 95% |
| **Phase 2** | 企業功能完善 | 使用者管理功能上線、查詢回應時間 P95 < 7 秒 |
| **Phase 3** | 平台化服務 | 支援 100+ 會員、系統可用性 ≥ 99.9% |

### 2.3 成功指標

| 指標類別 | 指標名稱 | 目標值 |
|----------|----------|--------|
| **效率提升** | 查詢回應時間 | P95 < 10 秒 |
| **準確度** | PII 偵測召回率 | ≥ 95% |
| **使用者滿意** | 使用者滿意度評分 | ≥ 4.0/5.0 |
| **系統穩定** | 系統可用性 | ≥ 99.5% |
| **合規性** | 稽核日誌完整性 | 100% 關鍵操作記錄 |
| **AI 品質** | 使用者滿意度 | ≥ 85% |
| **AI 品質** | 回答準確率 | ≥ 95% |

> 含 API 閘道路由與外部 AI 平台（Gemini/OpenAI）推論延遲

---

## 3. 使用者角色

### 3.1 角色定義

#### 一般使用者 (User)

| 屬性 | 描述 |
|------|------|
| 角色描述 | 透過 Chatbot 查詢資安問題的企業員工 |
| 核心需求 | 快速獲得資安相關問題的解答 |
| 技術水平 | 一般（不需技術背景） |
| 使用頻率 | 每週數次 |

#### IT 工程師 (IT User)

| 屬性 | 描述 |
|------|------|
| 角色描述 | 企業 IT/MIS 工程師或 SI 技術人員，需要技術性資安建議 |
| 核心需求 | 透過一般模式取得實務技術建議（設定指引、漏洞修補步驟等） |
| 技術水平 | 中等（熟悉 IT 基礎設施） |
| 使用頻率 | 每週數次 |
| 備註 | 與 User/Consultant 使用同一對話介面，差異在 system prompt 與回應模式 |

#### 資安 ISO 顧問 (Consultant)

| 屬性 | 描述 |
|------|------|
| 角色描述 | 負責資安諮詢的專業顧問，透過專業化 AI 對話取得深入資安諮詢建議 |
| 核心需求 | 透過專業化 AI 對話取得深入資安諮詢，查看自己的對話使用紀錄 |
| 技術水平 | 中等（熟悉資安概念） |
| 使用頻率 | 每日多次 |
| 備註 | 與 User 使用同一對話介面，差異在 system prompt、資料範圍、使用配額 |

#### 系統管理員 (Admin)

| 屬性 | 描述 |
|------|------|
| 角色描述 | 負責系統設定與維護的 IT 人員 |
| 核心需求 | 確保系統穩定運作、管理使用者、管理 RAG 知識庫訓練資料、執行資料去識別化 |
| 技術水平 | 高（熟悉系統管理） |
| 使用頻率 | 每日 |

#### 資料清洗人員 (Data Cleaner)

| 屬性 | 描述 |
|------|------|
| 角色描述 | 負責清洗資料審核的專職人員，僅可存取清洗管理介面 (Cleaner App) |
| 核心需求 | 審核清洗結果、編輯修正內容、標記標籤、批准任務、送入 RAG 知識庫 |
| 技術水平 | 中等（熟悉資料處理流程） |
| 使用頻率 | 每日 |
| 備註 | 不可進入 Admin Dashboard 與 Chatbot，僅透過獨立的 Cleaner App 操作 |

#### 平台管理員 (Platform Admin) 🔮

| 屬性 | 描述 |
|------|------|
| 角色描述 | 管理整個平台的超級管理員 |
| 核心需求 | 管理所有會員、平台維運、會員管理機制 |
| 技術水平 | 高（熟悉平台架構） |
| 使用頻率 | 每日 |

### 3.3 角色與應用程式存取矩陣

| 應用程式 | User | IT User | Consultant | Data Cleaner | Admin | Platform Admin |
|----------|:----:|:-------:|:----------:|:------------:|:-----:|:--------------:|
| Chatbot UI | ✓ | ✓ | ✓ | ✗ | ✓ | ✓ |
| Admin Dashboard | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| Cleaner App | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |

### 3.4 角色需求矩陣

| 需求 | User | IT User | Consultant | Data Cleaner | Admin | Platform Admin |
|------|:----:|:-------:|:----------:|:------------:|:-----:|:--------------:|
| **對話功能** |
| 使用對話介面 | ✓ | ✓ | ✓ | ✗ | ✓ | ✓ |
| 查看自己歷史對話 | ✓ | ✓ | ✓ | ✗ | ✓ | ✓ |
| 查看所有歷史對話 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 查看自己對話使用紀錄 | ✗ | ✗ | ✓ | ✗ | ✓ | ✓ |
| **回應模式** |
| 選擇回應模式 | ✗ | ✓ | ✓ | ✗ | ✓ | ✓ |
| **訓練資料管理（Admin Dashboard）** |
| 上傳訓練資料 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 執行去識別化任務 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 管理去識別化規則 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 匯入 RAG 知識庫 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| **清洗審核管理（Cleaner App）** |
| 查看清洗任務審核資訊 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 檢視清洗後檔案內容 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 編輯清洗後內容 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 標記標籤 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 批准/駁回任務 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 送入 RAG 知識庫 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 查看資料分析儀表板 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 瀏覽來源資料 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| 瀏覽知識庫文件 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |
| **稽核日誌** |
| 查看自己日誌 | ✗ | ✗ | ✓ | ✓ | ✓ | ✓ |
| 查看所有日誌 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| **系統管理** |
| 管理使用者 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 管理會員 | ✗ | ✗ | ✗ | ✗ | ✗ | ✓ |
| 提示詞管理 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 系統設定 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |

---

## 4. 功能概述

### 4.1 Phase 1：核心功能（已實作）

#### 智慧問答系統 (RAG)

| 功能 | 說明 | 業務價值 |
|------|------|----------|
| **自然語言查詢** | 使用者可用中英文提問資安問題 | 降低資安諮詢門檻 |
| **知識庫檢索** | 自動從企業知識庫檢索相關資訊 | 確保回答基於企業知識 |
| **引用來源顯示** | 顯示回答的來源文件與段落 | 提高回答可信度 |
| **對話歷史** | 保存並可搜尋歷史對話 | 方便回顧與追蹤 |

#### 資料去識別化平台（僅限系統管理員）

| 功能 | 說明 | 業務價值 |
|------|------|----------|
| **多格式支援** | 支援 PDF、DOCX、XLSX、CSV、TXT | 涵蓋常見企業文件格式 |
| **PII 自動偵測** | 偵測 19 種個資類型（含台灣專屬） | 確保訓練資料不含敏感個資 |
| **多種去識別化策略** | 提供 6 種去識別化方式 | 靈活適應不同場景 |
| **批次處理** | 支援多檔同時處理 | 提升管理員準備知識庫訓練資料效率 |
| **預覽功能** | 處理前可預覽去識別化效果 | 降低錯誤風險 |

#### 即時通知與稽核

| 功能 | 說明 | 業務價值 |
|------|------|----------|
| **即時進度推送** | WebSocket 即時顯示任務進度 | 提升使用者體驗 |
| **完整稽核日誌** | 記錄所有關鍵操作 | 滿足合規稽核需求 |
| **操作追蹤** | 可追蹤每個操作的執行者與時間 | 責任歸屬明確 |

#### 清洗審核管理應用 (Cleaner App)

> 獨立的 React 前端應用，專為清洗資料審核工作流設計，提供從查看、標籤、編輯、批准到送入 RAG 知識庫的完整審核流程。

| 功能 | 說明 | 業務價值 |
|------|------|----------|
| **審核工作流** | 查看 → 標籤 → 編輯 → 批准 → 送入 RAG 的完整流程 | 確保清洗品質，建立審核制度 |
| **資料管線視覺化** | 管線漏斗追蹤檔案從上傳到入庫的每個階段（5 階段漏斗） | 即時掌握資料處理進度與瓶頸 |
| **檔案內容檢視** | 逐檔檢視清洗前後內容對比，左側檔案導航面板 + 閱讀/編輯 Toggle | 快速掌握去識別化效果 |
| **內容編輯** | 可手動修正清洗結果中的錯誤 | 提升去識別化準確度 |
| **標籤管理** | 為清洗檔案標記分類標籤 | 方便後續知識庫管理與分類 |
| **任務批准/駁回** | 審核人員可批准或駁回整個清洗任務 | 建立品質把關機制 |
| **送入 RAG 知識庫** | 批准後的資料可直接匯入 RAG | 縮短資料上線流程 |
| **來源資料瀏覽** | 列出所有上傳檔案，支援搜尋、篩選、管線狀態追蹤（7 種狀態） | 全面掌握來源資料與管線狀態 |
| **知識庫文件管理** | 以文件為核心的三 Tab 管理（文件管理、語意搜尋、來源分析） | 多維度追蹤知識庫內容與品質 |

#### 資料分析儀表板 (Analytics Dashboard)

> 提供清洗統計、知識庫統計與時間軸統計等資料分析視覺化功能，位於 Cleaner App 中。

| 功能 | 說明 | 業務價值 |
|------|------|----------|
| **資料管線漏斗** | 上傳→清洗→審核→批准→入庫各階段的檔案數量統計 | 一眼掌握資料處理全貌 |
| **清洗效能指標** | 任務完成率、實體偵測分佈、處理時間統計 | 量化清洗工作成效 |
| **知識庫概況** | 已匯入文件數、向量數量、知識庫覆蓋度 | 掌握知識庫建設進度 |
| **最近操作記錄** | Timeline 呈現最近操作（上傳/清洗/審核/入庫等事件） | 即時追蹤系統活動與操作歷史 |
| **時間軸統計** | 清洗任務趨勢、每日/週/月處理量變化 | 追蹤工作量與產能趨勢 |

### 4.2 Phase 2：企業功能（規劃中）

#### 使用者認證與授權

| 功能 | 說明 |
|------|------|
| **帳號密碼認證** | 安全的登入機制，支援密碼錯誤鎖定 |
| **JWT Token 管理** | 安全的 Token 發放與更新機制 |
| **角色權限控制** | 依角色限制功能存取 |

#### 提示詞管理

> 提示詞管理是角色差異化的核心機制：不同角色獲得不同的 system prompt、資料範圍與使用配額，從而實現同一對話介面下的差異化服務。

| 功能 | 說明 |
|------|------|
| **範本建立與編輯** | 管理員可自訂不同角色的系統提示詞 |
| **角色專屬提示詞** | 不同角色獲得適合的回應風格與資料存取範圍 |
| **提示詞測試** | 上線前可測試提示詞效果 |
| **資料範圍設定** | 依角色設定可存取的知識庫範圍 |

#### 使用配額管理

| 功能 | 說明 |
|------|------|
| **角色配額設定** | 依角色設定對話次數、Token 用量等使用配額 |
| **配額監控** | 即時追蹤各角色的使用量與剩餘配額 |
| **配額告警** | 配額即將耗盡時自動通知 |

### 4.3 Phase 3：平台化（未來願景）

#### 多會員架構

| 功能 | 說明 |
|------|------|
| **會員隔離** | 各組織資料完全獨立 |
| **資源配額** | 可設定各會員的儲存與使用限制 |
| **獨立設定** | 各會員可有獨立的系統設定 |

#### 進階功能

| 功能 | 說明 |
|------|------|
| **進階 RBAC** | 細粒度權限控制、自訂角色 |
| **多知識庫管理** | 建立與管理多個獨立知識庫 |
| **智慧分析儀表板** | 合規狀態、使用趨勢、風險分析 |
| **第三方整合** | Webhook、API Gateway 整合 |
| **運維監控** | 系統效能監控與告警 |

---

## 5. 使用情境

### 5.1 高階使用流程

```
┌──────────────────────────────────────────────────────────────────────┐
│                        系統使用流程概覽                                  │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌──────────────────────────────────────────────────────────┐        │
│  │       對話介面（User / IT User / Consultant / Admin）     │        │
│  │                                                           │        │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │        │
│  │  │  一般使用者  │  │  資安顧問   │  │  系統管理員  │       │        │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘       │        │
│  │         │               │               │               │        │
│  │         ▼               ▼               ▼               │        │
│  │  ┌──────────────────────────────────────────────────┐    │        │
│  │  │  開啟對話介面，提出資安相關問題                    │    │        │
│  │  └──────────────────────┬───────────────────────────┘    │        │
│  │                         ▼                                │        │
│  │  ┌──────────────────────────────────────────────────┐    │        │
│  │  │  依角色差異化回應（system prompt / 資料範圍）      │    │        │
│  │  └──────────────────────────────────────────────────┘    │        │
│  └──────────────────────────────────────────────────────────┘        │
│                                                                       │
│  ┌──────────────────────────────────────────────────────────┐        │
│  │       管理後台（僅限系統管理員）                           │        │
│  │                                                           │        │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │        │
│  │  │  上傳訓練    │  │  去識別化    │  │  匯入知識庫 │       │        │
│  │  │  資料        │  │  處理        │  │             │       │        │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘       │        │
│  │         │               │               │               │        │
│  │         └───────────────┼───────────────┘               │        │
│  │                         ▼                                │        │
│  │  ┌──────────────────────────────────────────────────┐    │        │
│  │  │  管理使用者 / 查看稽核日誌 / 系統設定             │    │        │
│  │  └──────────────────────────────────────────────────┘    │        │
│  └──────────────────────────────────────────────────────────┘        │
│                                                                       │
│  ┌──────────────────────────────────────────────────────────┐        │
│  │       清洗管理介面（Data Cleaner / Admin）                │        │
│  │                                                           │        │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │        │
│  │  │  查看清洗    │  │  標籤/編輯   │  │  批准/送入   │       │        │
│  │  │  結果        │  │  內容        │  │  RAG 知識庫  │       │        │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘       │        │
│  │         │               │               │               │        │
│  │         └───────────────┼───────────────┘               │        │
│  │                         ▼                                │        │
│  │  ┌──────────────────────────────────────────────────┐    │        │
│  │  │  資料分析儀表板 / 清洗統計 / 知識庫統計            │    │        │
│  │  └──────────────────────────────────────────────────┘    │        │
│  └──────────────────────────────────────────────────────────┘        │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘
```

### 5.2 關鍵使用情境

#### 情境一：員工查詢資安政策

**角色**：一般使用者
**目標**：了解公司的資料外洩處理流程

**流程**：
1. 員工開啟 Chatbot 介面
2. 輸入問題：「發生資料外洩時該如何處理？」
3. 系統從知識庫檢索相關文件
4. 系統生成回答並顯示引用來源
5. 員工可進一步追問或結束對話

**業務價值**：員工無需等待資安人員回覆，即時獲得符合公司政策的正確答案。

---

#### 情境二：顧問進行專業資安諮詢

**角色**：資安 ISO 顧問
**目標**：透過 AI 對話取得深入的資安合規建議

**流程**：
1. 顧問開啟對話介面
2. 輸入專業資安問題（如 ISO 27001 合規要求）
3. 系統使用顧問專屬 system prompt，從深入的知識庫資料中檢索
4. 系統生成專業化回答，包含技術細節與引用來源
5. 顧問可進一步追問或查看對話使用紀錄

**業務價值**：顧問獲得比一般使用者更深入、更專業的回答，提升諮詢效率。

---

#### 情境二-B：IT 工程師查詢技術性資安問題

**角色**：IT 工程師
**目標**：取得防火牆設定或漏洞修補的實務指引

**流程**：
1. IT 工程師開啟對話介面
2. 選擇「一般模式」回應模式
3. 輸入技術性問題（如「如何設定 WAF 防禦 SQL Injection？」）
4. 系統生成包含實務操作步驟的技術回答

**業務價值**：IT 人員無需等待外部顧問，即時獲得可操作的技術指引。

---

#### 情境三：管理員稽核操作記錄

**角色**：系統管理員
**目標**：為外部稽核準備操作記錄報告

**流程**：
1. 管理員登入系統
2. 進入稽核日誌查詢頁面
3. 設定時間範圍與操作類型篩選
4. 匯出符合條件的稽核記錄
5. 提交給稽核單位

**業務價值**：完整的操作追蹤能力，輕鬆滿足法規稽核要求。

---

#### 情境四：管理員準備訓練資料

**角色**：系統管理員
**目標**：將含有個資的文件去識別化後匯入 RAG 知識庫

**流程**：
1. 管理員登入管理後台
2. 上傳待處理的企業文件 (PDF)
3. 選擇「標準台灣 PII 規則」去識別化設定
4. 預覽去識別化效果，確認無誤
5. 執行去識別化任務
6. 下載去識別化後的檔案
7. 將去識別化後的檔案匯入 RAG 知識庫

**業務價值**：確保匯入知識庫的訓練資料不含敏感個資，符合法規要求。

---

#### 情境五：清洗人員審核清洗結果

**角色**：資料清洗人員 (Data Cleaner)
**目標**：審核去識別化後的資料品質，確認無誤後批准送入 RAG 知識庫

**流程**：
1. 清洗人員登入 Cleaner App
2. 查看待審核的清洗任務列表
3. 點選任務，逐一檢視各檔案的清洗前後內容對比
4. 對需要修正的內容進行手動編輯
5. 為檔案標記分類標籤（如「法規類」、「技術指引」等）
6. 確認所有檔案審核完成後，批准該任務
7. 管理員確認後，將批准的資料送入 RAG 知識庫

**業務價值**：建立清洗品質審核機制，確保匯入知識庫的資料品質，實現職責分離。

---

#### 情境六：管理員查看資料分析

**角色**：系統管理員 / 資料清洗人員
**目標**：了解清洗工作成效與知識庫建設進度

**流程**：
1. 登入 Cleaner App
2. 進入總覽 (Dashboard) 頁面
3. 查看資料管線漏斗：掌握上傳→清洗→審核→批准→入庫各階段檔案數量
4. 查看清洗效能指標：任務完成率、PII 實體偵測分佈、處理時間
5. 查看知識庫概況：已匯入文件數、向量數量、覆蓋度
6. 查看最近活動 Timeline：追蹤最近的操作事件與時間戳

**業務價值**：透過管線漏斗與多維度統計，量化資料治理成效，即時發現處理瓶頸，協助管理決策。

---

#### 情境七：查看來源資料與知識庫

**角色**：資料清洗人員 / 系統管理員
**目標**：了解系統中所有來源檔案與已匯入知識庫的內容

**流程**：
1. 登入 Cleaner App
2. 側邊欄點選「來源資料」
3. 查看所有上傳檔案，可依類型篩選、關鍵字搜尋
4. 透過「管線狀態」欄追蹤每個檔案的處理進度（7 種狀態：未處理/清洗中/清洗失敗/待審核/已批准/已入庫/已退回）
5. 側邊欄點選「知識庫」，進入三 Tab 管理介面
6. Tab 1「文件管理」：以文件為核心聚合瀏覽向量化文件
7. Tab 2「語意搜尋」：測試 RAG 檢索品質
8. Tab 3「來源分析」：查看來源/標籤分佈統計，確認知識庫覆蓋度

**業務價值**：透過管線狀態追蹤與三維度知識庫管理，掌握從來源到知識庫的完整資料鏈路，確保資料品質與完整性。

---

## 6. 系統架構概覽

### 6.1 高階架構圖

```
┌───────────────────────────────────────────────────────────────────────┐
│                              使用者層                                    │
├───────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐     │
│  │  Chatbot 介面    │  │  管理後台介面     │  │  清洗管理介面     │     │
│  │  (所有角色)       │  │  (僅系統管理員)    │  │ (Data Cleaner/   │     │
│  │                  │  │                  │  │  Admin)          │     │
│  └────────┬─────────┘  └────────┬─────────┘  └────────┬─────────┘     │
│           │                     │                      │               │
└───────────┼─────────────────────┼──────────────────────┼───────────────┘
            │                     │                      │
┌───────────┼─────────────────────┼──────────────────────┼───────────────┐
│           │        應用服務層    │                      │               │
├───────────┼─────────────────────┼──────────────────────┼───────────────┤
│           │                     │                      │               │
│           └──────────┬──────────┴──────────────────────┘               │
│                      │                                                 │
│           ┌──────────▼──────────┐                                      │
│           │    核心 API 服務     │                                      │
│           │  (NestJS)           │                                      │
│           └──────────┬──────────┘                                      │
│                      │                                                 │
│     ┌────────────────┼────────────────┐                                │
│     │                │                │                                │
│  ┌──▼──────────┐  ┌──▼──────────┐  ┌──▼──────────┐                    │
│  │  RAG 服務   │  │  清洗服務   │  │  通知服務   │                    │
│  │  (FastAPI)  │  │  (Presidio) │  │  (WebSocket)│                    │
│  └──────┬──────┘  └──────┬──────┘  └─────────────┘                    │
│         │                │                                             │
└─────────┼────────────────┼─────────────────────────────────────────────┘
          │                │
┌─────────┼────────────────┼─────────────────────────────────────────────┐
│         │    資料儲存層   │                                             │
├─────────┼────────────────┼─────────────────────────────────────────────┤
│         │                │                                             │
│  ┌──────▼──────┐  ┌──────▼──────┐                                      │
│  │  向量資料庫  │  │  關聯式資料庫 │                                      │
│  │  (Qdrant)   │  │  (PostgreSQL)│                                      │
│  │             │  │              │                                      │
│  │  知識庫向量  │  │  業務資料     │                                      │
│  └─────────────┘  └──────────────┘                                      │
│                                                                        │
└───────────────────────────────────────────────────────────────────────┘
```

### 6.2 技術棧摘要

| 層級 | 技術選擇 | 選擇原因 |
|------|----------|----------|
| **前端框架** | React 19 | 生態成熟、元件化開發 |
| **前端 (Admin)** | React 19 + Vite 6 + Ant Design v6 | 管理後台 |
| **前端 (Chatbot)** | React 19 + Vite 6 + TailwindCSS v4 | 聊天介面 |
| **前端 (Cleaner)** | React 19 + Vite 6 + Ant Design v6 + TanStack React Query | 清洗審核管理介面 |
| **後端框架** | NestJS | 企業級 TypeScript 框架、模組化架構 |
| **AI 服務** | FastAPI + Qdrant + Gemini/OpenAI | 高效能 Python 框架、自建 RAG 管線 |
| **PII 偵測** | Microsoft Presidio | 業界標準、支援中文 |
| **資料庫** | PostgreSQL | 穩定可靠、功能完整 |
| **向量資料庫** | Qdrant | 高效能向量檢索 |
| **即時通訊** | WebSocket | 雙向即時通訊 |

### 6.3 部署架構

```
┌──────────────────────────────────────────────────────────────────────┐
│                           部署環境概覽                                   │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   開發環境（7 服務）        測試環境              正式環境              │
│   ──────────────           ────────             ────────              │
│   NestJS API               雲端測試機            雲端正式機             │
│   Admin Dashboard          單節點               多節點叢集              │
│   Chatbot UI               測試模式             生產模式               │
│   Cleaner App                                                         │
│   RAG/Cleaning Service     未來擴展                                    │
│   PostgreSQL               ────────                                    │
│   Qdrant                   Kubernetes                                  │
│                            Auto Scaling                               │
│                            高可用架構                                   │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘
```

---

## 7. 非功能需求概覽

### 7.1 效能指標

| 指標 | 目標值 | 說明 |
|------|--------|------|
| RAG 查詢回應時間 | P95 < 10 秒 | 含外部 AI 平台推論延遲（Phase 1）；Phase 2 目標 P95 < 7 秒 |
| 檔案上傳速度 | < 5 秒 (50MB) | 50MB 檔案上傳完成時間 |
| 清洗處理速度 | > 10 檔案/分鐘 | 批次處理吞吐量 |
| 並發使用者 | 支援 100 同時在線 | 現階段目標 |

### 7.2 安全合規要求

| 要求 | 規格 |
|------|------|
| 傳輸加密 | HTTPS/TLS 1.3 |
| 身分驗證 | JWT Token + 密碼雜湊 |
| 存取控制 | 角色權限控制 (RBAC) |
| 稽核追蹤 | 所有關鍵操作記錄 |
| 個資保護 | 符合台灣個資法要求 |

### 7.3 可用性目標

| 指標 | 目標值 |
|------|--------|
| 系統可用性 | ≥ 99.5% |
| 計畫性維護時間 | < 4 小時/月 |
| 資料備份頻率 | 每日增量、每週全量 |
| 資料恢復時間 | < 4 小時 |

---

## 8. 發展藍圖

### 8.1 階段規劃

```
┌─────────────────────────────────────────────────────────────────┐
│                        發展藍圖                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Phase 1               Phase 2 (規劃中)      Phase 3 (願景)       │
│  ─────────────────    ─────────────────    ─────────────────    │
│  ✅ RAG 查詢(Python)   🔄 使用者認證        🔮 多會員架構         │
│  ✅ 資料清洗(Python)   🔄 提示詞管理        🔮 進階 RBAC          │
│  ✅ 規則管理(Python)   🔄 角色權限          🔮 多知識庫           │
│  ✅ 任務管理(Python)                       🔮 進階分析儀表板      │
│  ✅ 即時通知(Python)                       🔮 第三方整合          │
│  ✅ 稽核日誌(Python)                       🔮 運維監控           │
│  ✅ NestJS API 層                                               │
│  ✅ Chatbot 前端                                                │
│  ✅ Admin 前端(清洗)                                             │
│  ✅ Cleaner App(審核)                                            │
│  ✅ Analytics Dashboard                                         │
│                                                                  │
│  ─────────────────────────────────────────────────────────────  │
│  |         |         |         |         |         |            │
│  Q1 2026   Q2 2026   Q3 2026   Q4 2026   Q1 2027   Q2 2027     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 8.2 里程碑定義

| 里程碑 | 預計時程 | 交付項目 |
|--------|----------|----------|
| **M1: 核心功能上線** | Q1 2026 | RAG 查詢、資料清洗、即時通知、稽核日誌、清洗審核管理 (Cleaner App)、Analytics Dashboard |
| **M2: 企業功能上線** | Q3 2026 | 使用者認證、提示詞管理、角色權限 |
| **M3: 平台化啟動** | Q1 2027 | 多會員架構、進階 RBAC |
| **M4: 完整平台** | Q2 2027 | 分析儀表板、第三方整合、運維監控 |

---

## 9. 風險與假設

### 9.1 專案風險

| 風險 | 可能性 | 影響 | 緩解措施 |
|------|:------:|:----:|----------|
| **PII 偵測準確度不足** | 中 | 高 | 持續優化模型、人工複核機制 |
| **系統效能瓶頸** | 中 | 中 | 效能測試、架構優化、快取機制 |
| **使用者採用率低** | 低 | 高 | 使用者教育訓練、介面優化 |
| **法規變動** | 低 | 中 | 持續關注法規更新、保持架構彈性 |
| **資料外洩** | 低 | 高 | 加密、存取控制、稽核追蹤 |

### 9.2 關鍵假設

| 假設 | 說明 | 驗證方式 |
|------|------|----------|
| 使用者有資安諮詢需求 | 企業員工經常需要查詢資安相關問題 | 使用者訪談、使用量統計 |
| 現有知識庫內容充足 | 企業有足夠的資安文件可供建立知識庫 | 文件清單盤點 |
| 基礎設施可用 | 企業可提供必要的伺服器與資料庫環境 | 環境檢核 |
| IT 團隊可維護 | 企業有能力維護部署後的系統 | 技術能力評估 |

---

## 10. 附錄

### 10.1 術語表

| 術語 | 說明 |
|------|------|
| **RAG** | Retrieval-Augmented Generation，檢索增強生成，結合資訊檢索與 AI 生成的技術 |
| **PII** | Personally Identifiable Information，個人可識別資訊 |
| **去識別化** | Data De-identification，將敏感資料轉換為無法識別原始內容的處理方式 |
| **知識庫** | 經過向量化處理後可供 AI 檢索的文件集合 |
| **會員** | 在多會員架構中，代表一個獨立的組織（會員）單位 |
| **RBAC** | Role-Based Access Control，基於角色的存取控制 |
| **三層式AI顧問模式** | 系統依使用者技術背景提供三種回應深度：新手模式（白話故事化）、一般模式（實務技術建議）、顧問模式（專業分析含法規引用） |
| **Cleaner App** | 獨立的清洗審核管理前端應用，提供查看、標籤、編輯、批准、送入 RAG 知識庫的完整審核工作流 |
| **data_cleaner** | 資料清洗人員角色，僅可存取 Cleaner App，負責清洗結果審核 |
| **Analytics Dashboard** | 資料分析儀表板，提供清洗統計、知識庫統計與時間軸統計 |

### 10.2 參考文件索引

| 文件 | 說明 | 位置 |
|------|------|------|
| 完整技術 SRS | 詳細技術規格（含 API、資料模型） | `docs/specs/SRS_TECHNICAL.md` |
| 清洗 API 文件 | 資料清洗 API 完整規格 | `docs/api/cleaning-api.md` |
| RAG API 文件 | RAG 服務 API 完整規格 | `docs/api/rag-api.md` |
| Google Drive 整合 | Google Drive 資料源整合指南 | `docs/GDRIVE_SETUP_GUIDE.md` |
| 專案全貌 | 系統架構與技術選型 | `PROJECT_CONTEXT.md` |

---

## 文件版本歷程

| 版本 | 日期 | 變更說明 |
|------|------|----------|
| 1.7.0 | 2026-02-17 | 移除商業規格書中的技術細節（port 號碼），改用服務名稱描述；移除 §6.3 連線埠分配表 |
| 1.6.0 | 2026-02-13 | Cleaner App 重構：新增資料管線漏斗視覺化、知識庫三 Tab 管理（文件管理/語意搜尋/來源分析）、來源資料管線狀態追蹤（7 種狀態）、檔案審核左側導航面板；更新情境六（管線漏斗+多維統計）、情境七（管線狀態+三 Tab）；Analytics 新增管線漏斗與最近操作記錄 |
| 1.5.0 | 2026-02-12 | 新增來源資料瀏覽功能（GET /api/v1/files）；新增知識庫文件瀏覽功能（4 支 Knowledge Base API）；更新角色權限矩陣；新增使用情境七；Cleaner App 側邊欄擴充至 4 個項目 |
| 1.4.0 | 2026-02-11 | 新增 Cleaner App 獨立前端；新增 data_cleaner 角色；新增清洗審核工作流功能；新增 Analytics Dashboard；更新角色權限矩陣與應用程式存取矩陣；新增清洗審核與資料分析使用情境；更新系統架構圖 |
| 1.3.0 | 2026-02-09 | 對齊計畫書：目標市場改為中小企業；新增三層式AI顧問模式概念；新增 IT User 角色；新增在地化法規知識庫強調；新增 AI 品質指標 |
| 1.2.0 | 2026-02-09 | 「租戶」→「會員」；移除 Tenant Admin 角色（功能併入 Platform Admin）；效能指標調整為 P95 < 10/7 秒 |
| 1.1.0 | 2026-02-09 | 修正角色定位與去識別化功能定位；術語統一「脫敏」→「去識別化」 |
| 1.0.0 | 2026-02-05 | 初始版本 |

---

> **文件結束**
>
> 本文件為 ODA Cyber Konsult 資安助手 RAG 系統的商業需求規格書。
> 如需查看完整技術規格，請參閱 `SRS_TECHNICAL.md`。
